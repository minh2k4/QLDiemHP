function notifyMsg(n, t) {
  return $.bootstrapGrowl(n, { type: t, delay: 2e3 }), !0;
}
function notifyLoading(n) {
  return (
    $.bootstrapGrowl('<i class="fa fa-spinner fa-spin"></i> ' + n, {
      type: "info",
      delay: 0,
    }),
    !0
  );
}
function hideNotify() {
  $(".bootstrap-growl").remove();
}
function showModal(n) {
  $("#" + n).modal({ keyboard: !0 });
}
function userProfile(n, t) {
  $.ajax({
    url: "/account/viewusersidemenu",
    type: "POST",
    data: { activeTree: n },
    success: function (t) {
      n !== "sideBarSearch" &&
        $("#sideBarSearch").removeClass("active").removeClass("menu-open");
      $("#mainSideBarContent").append(t);
    },
    complete: function () {
      getCookie("_pi") === "1" &&
        $("#mainSideBarContent").append(
          "<li id='appItem'><a href='#' onclick='installApp();'><i class='fa fa-download text-aqua'></i> <span>CĂ i Ä‘áº·t app</span></a></li>"
        );
    },
  });
  var i = "<ul class='nav navbar-nav'>";
  _isLoggedIn = !1;
  _uid = 0;
  _utype = 0;
  _ucode = "";
  _uinfor1 = "";
  _uinfor2 = "";
  $.ajax({
    url: "/account/viewuserinfor",
    type: "POST",
    success: function (n) {
      if (n.code == 0) {
        i +=
          "<li><a href='/account/login'><i class='fa fa-sign-in'></i>&nbsp; ÄÄƒng nháº­p</a></li>";
        i += "</ul>";
        $("#navUserMenu").html(i);
        return;
      }
      if (n.code == 2) {
        $.ajax({
          url: "/account/relogin",
          type: "POST",
          success: function () {
            location.reload();
          },
        });
        i +=
          "<li><a href='/account/login'><i class='fa fa-sign-in'></i>&nbsp; ÄÄƒng nháº­p</a></li>";
        i += "</ul>";
        $("#navUserMenu").html(i);
        return;
      }
      _isLoggedIn = !0;
      _ucode = n.infor3;
      _uinfor1 = n.hoTen;
      _uinfor2 = n.infor1;
      _uphoto = n.photo;
      i += "<li class='dropdown user user-menu'>";
      i +=
        "<a href='#' class='dropdown-toggle' data-toggle='dropdown' aria-expanded='true'>";
      i +=
        "<img src='/account/getphoto?v=" +
        _uphoto +
        "' class='user-image' alt='User Image'>";
      i += "&nbsp; <span class=''>" + _uinfor1 + "</span></a>";
      i += "<ul class='dropdown-menu'><li class='user-header'>";
      n.idGV > 0
        ? ((_uid = n.idGV),
          (_utype = 1),
          (i +=
            "<img src='/account/getphoto?v=" +
            _uphoto +
            "' class='img-circle' alt='User Image' style='cursor:pointer' onclick='window.location=\"/account/viewphoto\"'>"),
          (i += "<p>" + _uinfor1),
          (i +=
            "<small>Giáº£ng viĂªn</small><small>" +
            _uinfor2 +
            "</small></p></li>"))
        : ((_uid = n.idSV),
          (_utype = 2),
          (i +=
            "<img src='/account/getphoto?v=" +
            _uphoto +
            "' class='img-circle' alt='User Image' style='cursor:pointer' onclick='window.location=\"/account/viewphoto\"'>"),
          (i += "<p>" + _uinfor1 + "<small>" + _ucode + "</small>"),
          (i += "<small>Sinh viĂªn - " + _uinfor2 + "</small></p></li>"));
      i +=
        "<li class='user-footer'><div class='pull-left'><a href='/account/viewchangepassword' class='btn btn-default btn-flat'><i class='fa fa-key'/>&nbsp; Äá»•i máº­t kháº©u</a></div>";
      i +=
        "<div class='pull-right'><a href='/account/logout' class='btn btn-default btn-flat'><i class='fa fa-sign-out'/>&nbsp; ÄÄƒng xuáº¥t</a></div></li></ul>";
      i += "</ul>";
      $("#navUserMenu").html(i);
      t && typeof t == "function" && t();
    },
    error: function () {
      i +=
        "<li><a href='/account/login'><i class='fa fa-sign-in'></i>&nbsp; ÄÄƒng nháº­p</a></li>";
      i += "</ul>";
      $("#navUserMenu").html(i);
    },
  });
}
async function installApp() {
  $("#appItem").remove();
  _app.prompt();
  const {} = await _app.userChoice;
  _app = null;
}
function setCookie(n, t, i) {
  var r = new Date(),
    u;
  r.setTime(r.getTime() + i * 864e5);
  u = "expires=" + r.toUTCString();
  document.cookie = n + "=" + t + ";" + u + ";path=/";
}
function getCookie(n) {
  for (
    var t, r = n + "=", u = document.cookie.split(";"), i = 0;
    i < u.length;
    i++
  ) {
    for (t = u[i]; t.charAt(0) == " "; ) t = t.substring(1);
    if (t.indexOf(r) == 0) return t.substring(r.length, t.length);
  }
  return "";
}
function deleteCookie(n) {
  setCookie(n, "", -1);
}
function round(n, t) {
  return Number(Math.round(n + "e" + t) + "e-" + t);
}
$(document).ready(function () {
  $(window).scroll(function () {
    $(this).scrollTop() > 50
      ? $("#back-to-top").fadeIn()
      : $("#back-to-top").fadeOut();
  });
  $("#back-to-top").click(function () {
    return (
      $("#back-to-top").tooltip("hide"),
      $("body,html").animate({ scrollTop: 0 }, 500),
      !1
    );
  });
  $("#back-to-top").tooltip("show");
});
var _isLoggedIn = !1,
  _uid = 0,
  _utype = 0,
  _ucode = "",
  _uinfor1 = "",
  _uinfor2 = "",
  _app = null;
"serviceWorker" in navigator &&
  window.addEventListener("load", () => {
    navigator.serviceWorker.register("/sw.js").then((n) => {
      console.log("Service worker registered.", n);
    });
  });
window.addEventListener("beforeinstallprompt", (n) => {
  n.preventDefault(), (_app = n), setCookie("_pi", "1", 1);
});
window.addEventListener("appinstalled", () => {
  setCookie("_pi", "0", 1), $("#appItem").remove(), (_app = null);
});
window.matchMedia("(display-mode: standalone)").matches
  ? setCookie("_app", "true", 1)
  : setCookie("_app", "false", 1);
$.ajax({ url: "/utils/viewtopmenu", type: "POST" });
let _timerId = setTimeout(function request() {
  $.ajax({
    url: "/utils/keepalive",
    type: "POST",
    complete: function () {
      _timerId = setTimeout(request, 6e5);
    },
  });
}, 6e5);
